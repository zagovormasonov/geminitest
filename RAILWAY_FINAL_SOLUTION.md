# üéâ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Railway

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

### üîç –ß—Ç–æ –±—ã–ª–æ –Ω–µ —Ç–∞–∫:
1. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã** - `package-lock.json` –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª `package.json`
2. **Railway –Ω–µ –º–æ–≥ –Ω–∞–π—Ç–∏ –º–æ–¥—É–ª–∏** - `express`, `cors`, `dotenv` –∏ –¥—Ä—É–≥–∏–µ
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞** - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –ø–∞–ø–∫–∞—Ö

### üöÄ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
1. **–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –∫–æ—Ä–Ω–µ** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∫–æ—Ä–Ω–µ–≤–æ–π `package.json`
2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω lock —Ñ–∞–π–ª** - –≤—ã–ø–æ–ª–Ω–µ–Ω `npm install`
3. **–ï–¥–∏–Ω—ã–π —Å–µ—Ä–≤–µ—Ä** - `railway-server.js` –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ
4. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –æ–±–Ω–æ–≤–ª–µ–Ω `railway.json`

## üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### üìÅ –ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞:
```
gemini-psychology-app/
‚îú‚îÄ‚îÄ package.json          # –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (frontend + backend)
‚îú‚îÄ‚îÄ package-lock.json     # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π lock —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ railway-server.js     # –ï–¥–∏–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è Railway
‚îú‚îÄ‚îÄ railway.json          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Railway
‚îú‚îÄ‚îÄ dist/                 # –°–æ–±—Ä–∞–Ω–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ src/                  # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îî‚îÄ‚îÄ backend/              # Backend –∫–æ–¥ (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
```

### üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –∫–æ—Ä–Ω–µ:
```json
{
  "dependencies": {
    "react": "^19.1.1",
    "react-dom": "^19.1.1",
    "typescript": "~5.8.3",
    "vite": "^7.1.6",
    "@vitejs/plugin-react": "^5.0.2",
    "express": "^4.18.2",           // ‚Üê Backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
    "cors": "^2.8.5",               // ‚Üê –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ
    "dotenv": "^16.3.1",
    "@google/generative-ai": "^0.21.0"
  }
}
```

## üöÇ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Railway

### `railway.json`:
```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "npm run build && node railway-server.js",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

### –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:
```bash
npm run build && node railway-server.js
```

## üîß –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. Railway –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É:
- `npm run build` - —Å–æ–±–∏—Ä–∞–µ—Ç React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ `dist/`
- `node railway-server.js` - –∑–∞–ø—É—Å–∫–∞–µ—Ç Express —Å–µ—Ä–≤–µ—Ä

### 2. –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –†–∞–∑–¥–∞–µ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –∏–∑ `dist/`
- ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã: `/api/health`, `/api/test`, `/api/advice`
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 3. –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã:
- ‚úÖ `express` - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
- ‚úÖ `cors` - CORS middleware
- ‚úÖ `dotenv` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ `@google/generative-ai` - Gemini API

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### 1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–¥ –≤ GitHub:
```bash
git add .
git commit -m "Fix Railway deployment - unified server with all dependencies"
git push origin main
```

### 2. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ –∫–æ—Ä–Ω—è
- –°–æ–±–µ—Ä–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (`npm run build`)
- –ó–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–µ—Ä (`node railway-server.js`)

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:
- **Health check**: `https://your-app.railway.app/api/health`
- **Test endpoint**: `https://your-app.railway.app/api/test`
- **Advice endpoint**: `https://your-app.railway.app/api/advice`
- **Frontend**: `https://your-app.railway.app/`

## üîç –û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏

### –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—É—Å–∫–µ:
```
üöÄ Starting Railway server...
üìä Environment variables:
  PORT: 3000
  NODE_ENV: production
  GEMINI_API_KEY: SET
üöÄ Railway server –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
üåê Health check: http://localhost:3000/api/health
üìÅ Static files: /app/dist
```

### –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ:
```
üè• Health check requested
üß™ Test endpoint called
üìù Advice request received
‚úÖ Gemini Service loaded successfully
‚úÖ Advice generated by model: gemini-1.5-flash
```

## üéâ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ –†–µ—à–∞–µ—Ç –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - –≤—Å–µ –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - `package-lock.json` –æ–±–Ω–æ–≤–ª–µ–Ω
- **–ú–æ–¥—É–ª–∏** - –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞
- **–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞

### ‚úÖ –£–ø—Ä–æ—â–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç:
- **–ï–¥–∏–Ω—ã–π —Å–µ—Ä–≤–µ—Ä** - –æ–¥–∏–Ω —Ñ–∞–π–ª –¥–ª—è Railway
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞** - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **–ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏** - –ª–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

### ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - graceful shutdown
- **Fallback** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ Gemini API
- **Health checks** - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Railway

### –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- ‚úÖ `GEMINI_API_KEY` - –≤–∞—à API –∫–ª—é—á Gemini
- ‚úÖ `NODE_ENV` - production (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway Dashboard:
- –û—Ç–∫—Ä–æ–π—Ç–µ Railway Dashboard
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Deployments"
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞

## üéØ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### 1. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–¥ –≤ GitHub
- Railway –∑–∞–ø—É—Å—Ç–∏—Ç –µ–¥–∏–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

### 2. –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Gemini API

### 3. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç—Å—è:
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π —Ö–æ—Å—Ç–∏–Ω–≥
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Railway

## üö® –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ï—Å–ª–∏ Railway –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **Heroku** - –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –¥–ª—è Node.js
2. **Vercel** - —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
3. **DigitalOcean App Platform**
4. **Render** - –ø—Ä–æ—Å—Ç–æ–π —Ö–æ—Å—Ç–∏–Ω–≥ –¥–ª—è Node.js

### –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway Dashboard
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:
- ‚úÖ **–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è** - –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
- ‚úÖ **–§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç** - React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–¥–∞–µ—Ç—Å—è
- ‚úÖ **API —Ä–∞–±–æ—Ç–∞–µ—Ç** - —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ—Ç–≤–µ—á–∞—é—Ç
- ‚úÖ **Gemini API —Ä–∞–±–æ—Ç–∞–µ—Ç** - –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- ‚úÖ **–õ–æ–≥–∏ –ø–æ–¥—Ä–æ–±–Ω—ã–µ** - –ª–µ–≥–∫–æ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Ä–µ—à–∏—Ç—å –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Railway! üöÇ‚ú®üéâ
